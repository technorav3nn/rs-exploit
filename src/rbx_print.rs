#[allow(deprecated)]
use mach_o_sys::dyld::_dyld_get_image_vmaddr_slide;

type RobloxPrintFunc = extern "C" fn(arg1: i32, arg2: *const i8);

#[allow(deprecated)]
#[allow(dead_code)]
#[allow(unused_variables)]
pub unsafe fn rbx_print(mode: i32, message: &str) {
    let aslr = 0x100000000;
    let func_address = 0x0100BAEA4D;

    let header = _dyld_get_image_vmaddr_slide(0);

    let func_ptr = (func_address - aslr + (header)) as *const RobloxPrintFunc;

    println!("func_ptr: {:p}", func_ptr);

    if !func_ptr.is_null() {
        (*func_ptr)(mode, message.as_bytes().as_ptr() as *const i8);
    } else {
        println!("Function pointer is null....... :(");
    }
}
